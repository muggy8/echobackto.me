const absoluteAssetRegex=/^(https?:)?\//,cacheName="assets";async function installAssets(){const e=await caches.open(cacheName),t=await fetch("/assets.json").then(e=>e.json()),s=await e.match("/assets.json").then(e=>e?e.json():{});let a={};for(let e in t)s[e]!==t[e]&&(a[e]=t[e]);let n=[];for(let t in a){let s=fetchAndStoreRequest(absoluteAssetRegex.test(t)?t:"/"+t,e);n.push(s)}return console.log("assets updated"),installAssets.ready=Promise.all(n)}async function fetchAndStoreRequest(e,t){let s=await fetch(e);return await t.put(e,s.clone()),s}installAssets.ready=Promise.resolve(),self.addEventListener("install",function(e){e.waitUntil(installAssets())}),self.addEventListener("fetch",function(e){"navigate"===e.request.mode?(installAssets(),e.respondWith(caches.open(cacheName).then(t=>t.match(e.request)))):e.respondWith(installAssets.ready.then(async()=>{let t=await caches.open(cacheName),s=await t.match(e.request);return s||fetchAndStoreRequest(e.request,t)}))});